<app-seller-navbar></app-seller-navbar>

<div class="clearheader"></div>

<body>
    <div class="center">
        <div class="w3-container">
          <div class="container" style="margin-top:70px; height:750px; width: 1500px;">
            <div class="row">
              <div class="column" style="margin-left: 32px">
                <h4>Orders</h4>
              </div>
            </div>
            <div class="row justify-content-md">
                <div class="col">
                </div>
                <div class="col">
                  <div class="input-group mb-3 searchBox">
                    <input type="text" class="form-control" placeholder="Search Purchased Offers" (keyup)="searchRequestFilter($event.target.value)" style="margin-right: 14px">
                  </div>
                </div>
              </div>
            &nbsp;
    <!-- Start of New Offer Table Content -->
    <div class="container">
        <table mat-table [dataSource]="dataSourceOffers" multiTemplateDataRows matSort class="mat-elevation-z8">
          <ng-container matColumnDef="{{column}}" *ngFor="let column of displayOfferColumns">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="text-align: center; font-size: 16px">
              <span *ngIf="column === 'title'">Title</span>
              <span *ngIf="column === 'offerStatus'">Status</span>
              <span *ngIf="column === 'created_at'">Submission Date</span>
            </th>
            <td mat-cell *matCellDef="let element">
              <span *ngIf="column === 'created_at'; else other;">
                <span>{{element.created_at | amLocale:'en' | amDateFormat: 'MM-DD-YYYY hh:mm a'}}</span>
              </span>
              <ng-template #other>{{element[column]}}</ng-template>
            </td>
          </ng-container>

          <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
          <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let element" [attr.colspan]="displayOfferColumns.length">
              <div class="example-element-detail" [@detailExpand]="element == expandedOfferElement ? 'expanded' : 'collapsed'">
                <div class="container" style="border:3px solid #7f8fa6; background-color:azure">
                  &nbsp;
                  <div>
                    <h6>Your Offer Price:</h6>
                    <div>${{element.price}}</div>
                  </div>
                  &nbsp;
                  <div>
                    <h6>Shipping Price:</h6>
                    <span>${{element.shippingPrice}}</span>
                  </div>
                  &nbsp;
                  <div>
                    <h6>Offer Description:</h6>
                    <div [innerHTML]="element.description"></div>
                  </div>
                  &nbsp;
                  <div>
                    <h6>Offer Status:</h6>
                    <div>{{element.offerStatus}}</div>
                  </div>
                  &nbsp;
                  <div>
                      <h6>Offer Images:</h6>
                      <label *ngIf = "!element.offer_images[0]">No Images Submitted </label>
                      <img class="OfferImageDisplay" *ngIf = "element.offer_images[0]" src={{element.offer_images[0]}} alt="" width="120" height="120">
                      <img class="OfferImageDisplay" *ngIf = "element.offer_images[1]" src={{element.offer_images[1]}} alt="" width="120" height="120">
                      <img class="OfferImageDisplay" *ngIf = "element.offer_images[2]" src={{element.offer_images[2]}} alt="" width="120" height="120">
                      &nbsp;
                  </div>
                  &nbsp;
                  <div>
                      <h6>Completion & Delivery Promise:</h6>
                      <div [innerHTML]="element.expected_completion"></div>
                      &nbsp;
                  </div>
                </div>
              </div>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayOfferColumns"></tr>
          <tr mat-row *matRowDef="let element; columns: displayOfferColumns;" (click)="expandedOffer(element.request_ID)"
            class="example-element-row"
            [class.example-expanded-row]="expandedOfferElement === element"
            (click)="expandedOfferElement = expandedOfferElement === element ? null : element">
          </tr>
          <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
        </table>
        <div *ngIf="dataSourceOffers.filteredData.length === 0" class="float-center">
          <div class="card mat-elevation-z8" style="border-color:#7f8fa6; border-width: 3px; text-align: center">
            &nbsp;
            <h6>No orders to see here.</h6>
            &nbsp;
          </div>
        </div>
        <mat-paginator [length]="dataSourceOffers.filteredData.length" [pageSize]="25">
       </mat-paginator>
      </div>
    <!--- End of New Table Content-->
    </div>
    </div>
    </div>
</body>

<div class="clearfooter"></div>
